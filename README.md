# Automatic Gift Collections Parser

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–π –ø–æ–¥–∞—Ä–∫–æ–≤ —Å [portal-market.com](https://portal-market.com), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç Python-—Ñ–∞–π–ª—ã —Å –º–∞–ø–ø–∏–Ω–≥–∞–º–∏ –∏–º–µ–Ω –∏ ID –ø–æ–¥–∞—Ä–∫–æ–≤.

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ —á–µ—Ä–µ–∑ API
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª `Portals/collections_ids.py` —Å –º–∞–ø–ø–∏–Ω–≥–∞–º–∏ –∏–º–µ–Ω ‚Üí ID
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª `collections_names.py` —Å –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –º–∞–ø–ø–∏–Ω–≥–∞–º–∏ –∏–º–µ–Ω
- –í–µ–¥–µ—Ç –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π –≤ `parser_log.txt`
- –ö–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### `Portals/collections_ids.py`
–°–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è:
- `FULL_NAME_TO_ID` - –ø–æ–ª–Ω–æ–µ –∏–º—è ‚Üí ID –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `SHORT_NAME_TO_ID` - –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è ‚Üí ID –∫–æ–ª–ª–µ–∫—Ü–∏–∏

–ü—Ä–∏–º–µ—Ä:
```python
FULL_NAME_TO_ID = {
    "Khabib's Papakha": "182c1bca-96ef-46c5-ab45-d4b98610ff58",
    # ...
}

SHORT_NAME_TO_ID = {
    "khabibspapakha": "182c1bca-96ef-46c5-ab45-d4b98610ff58",
    # ...
}
```

### `collections_names.py`
–°–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω:
- `SHORT_TO_LONG_NAME` - –∫–æ—Ä–æ—Ç–∫–æ–µ ‚Üí –ø–æ–ª–Ω–æ–µ –∏–º—è
- `LONG_TO_SHORT_NAME` - –ø–æ–ª–Ω–æ–µ ‚Üí –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è

–ü—Ä–∏–º–µ—Ä:
```python
SHORT_TO_LONG_NAME = {
    "khabibspapakha": "Khabib's Papakha",
    # ...
}

LONG_TO_SHORT_NAME = {
    "Khabib's Papakha": "khabibspapakha",
    # ...
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä:
```bash
python parse_collections.py
```

### GitHub Actions

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
- **–ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤** (–≤ 00:00, 06:00, 12:00, 18:00 UTC)
- **–í—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É Actions –Ω–∞ GitHub

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –ö–æ–º–º–∏—Ç–∏—Ç –∏ –ø—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `parser_log.txt`:
- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å API

–§–æ—Ä–º–∞—Ç –ª–æ–≥–∞:
```
[2025-12-07 16:00:00 UTC] [INFO] Starting gift collections parser
[2025-12-07 16:00:01 UTC] [INFO] Successfully fetched 100 collections
[2025-12-07 16:00:02 UTC] [INFO] File updated: Portals/collections_ids.py
```

## üîí –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ HTTP —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)
- ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (`id`, `name`, `short_name`)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é —Ñ–∞–π–ª–æ–≤

## üîß API Endpoint

```
GET https://portal-market.com/api/collections?limit=999
```

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- curl-cffi >= 0.6.0

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
# –ò–º–ø–æ—Ä—Ç –º–∞–ø–ø–∏–Ω–≥–æ–≤
from Portals.collections_ids import FULL_NAME_TO_ID, SHORT_NAME_TO_ID
from collections_names import SHORT_TO_LONG_NAME, LONG_TO_SHORT_NAME

# –ü–æ–ª—É—á–∏—Ç—å ID –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏
collection_id = FULL_NAME_TO_ID["Khabib's Papakha"]

# –ü–æ–ª—É—á–∏—Ç—å ID –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–º—É –∏–º–µ–Ω–∏
collection_id = SHORT_NAME_TO_ID["khabibspapakha"]

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è –≤ –¥–ª–∏–Ω–Ω–æ–µ
full_name = SHORT_TO_LONG_NAME["khabibspapakha"]

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω–æ–µ –∏–º—è –≤ –∫–æ—Ä–æ—Ç–∫–æ–µ
short_name = LONG_TO_SHORT_NAME["Khabib's Papakha"]
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ portal-market.com.
